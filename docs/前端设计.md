## 科研成果管理子系统 · 前端设计文档（V2）

> 面向产品 / 交互 / 前端开发的页面级设计说明，强调“人性化、高可交互性”的科研成果管理体验。

---

## 1. 整体设计原则

### 1.1 设计目标

- 让科研人员“**快速录入，少填表**”。
- 让专家“**高效审核，信息一目了然**”。
- 让管理员“**全局纵览，轻松治理**”。

### 1.2 交互与信息架构

- **全局布局**：典型 B 端三栏布局
  - 顶部：系统标题、当前机构、用户信息、消息中心（铃铛）。
  - 左侧：角色驱动的主导航菜单。
  - 右侧：内容区域，顶部面包屑 + 主要内容 + 底部次要信息。
- **角色导航**：
  - 普通用户：个人概览、创建成果物、个人成果物、成果检索。
  - 专家：在普通用户基础上新增“成果审核”。
  - 管理员：科研看台、成果管理、成果审核分配、成果类型配置、报表导出（预留）。

### 1.3 视觉与页面风格

- **整体风格**：
  - 科研感、理性、克制，避免花哨；主打“**干净 + 层次分明**”。
  - 主色：科技蓝（如 `#2266EE`），辅色：成功绿 `#27AE60`、警告橙 `#F2994A`、错误红 `#E74C3C`。
  - 背景：大面积浅灰 `#F5F6FA`，页面内容区域为白底卡片，突出信息层次。
- **组件风格**：
  - 卡片、弹窗圆角 6–8px，阴影弱化（如 `0 4px 12px rgba(0,0,0,0.04)`）。
  - 按钮以填充主按钮 + 线框次按钮组合，禁用态和 loading 态明显可见。
- **数据可视化**：
  - 统一使用轻量主题（如 ECharts light），配色与主色系一致，注意色盲友好。

### 1.4 通用交互规范

- **加载态**：
  - 页面级：使用骨架屏（skeleton）代替“整页转圈”。
  - 列表/表格：行骨架占位，避免空白闪烁。
- **反馈与提示**：
  - 成功：右上角轻量通知（3 秒自动消失），不打断操作。
  - 失败：toast + 就地错误信息（表单字段红框 + 文案）。
- **空态与引导**：
  - 提供简短解释 + 1 个强引导操作（如“去创建成果物”按钮）。
  - 列表无结果时提示“尝试放宽筛选条件”。

---

## 2. 登录页

### 2.1 功能说明

用户通过账号密码登录系统，完成身份认证并加载其角色信息。登录成功后，根据角色跳转到对应首页：

- 普通用户 → 个人成果概览页
- 专家 → 审核任务列表页
- 管理员 → 科研看台页

### 2.2 主要交互

1. 访问 `/login`，展示登录卡片。
2. 用户输入账号、密码，可选“记住登录状态”。
3. 点击【登录】后按钮进入 loading，表单禁用以防多次提交。
4. 成功：缓存 token 与用户信息，跳转对应首页。
5. 失败：
   - 账号/密码错误：密码框下方红色错误文案，账号保留，仅清空密码。
   - 账号被禁用：整卡片顶部红色提示“账号已被禁用，请联系管理员”。
   - 网络错误：提示“登录服务暂时不可用，请稍后重试”。

### 2.3 界面与风格

- 居中大卡片，左右两列：
  - 左侧：系统名称、副标题（如“科研成果一体化管理平台”）和一句简短价值主张。
  - 右侧：登录表单。
- 表单元素：
  - 账号、密码输入框 + “记住登录状态”复选框。
  - 主按钮【登录】占满行宽，下方小链接“忘记密码请联系管理员”。
- 背景使用浅色渐变或简约抽象科研插画，避免喧宾夺主。

---

## 3. 普通用户首页 · 个人成果概览

### 3.1 功能说明

为科研人员提供“上来就放心”的个人成果概览：

- 顶部数字卡片：总成果数、论文数、专利数、本月新增。
- 图表：按类型分布饼图 + 近年成果产出趋势图。
- 下方列表：最近提交/入库的若干成果。

### 3.2 主要交互

1. 登录成功后自动跳转 `/dashboard`。
2. 初始化请求 `GET /api/stats/my-summary`。
3. 卡片和图表加载前展示骨架屏。
4. 若统计接口失败：
   - 各卡片内显示“加载失败”及【重试】小按钮。
5. 若用户当前无任何成果：
   - 数字卡片显示 0，图表区域显示空态插画 +【去创建成果物】按钮。

### 3.3 界面与风格

- 左侧：主导航栏（常驻）。
- 右侧内容区：
  - 顶部：四个统计卡片横排，悬浮展示详细说明。
  - 中间：
    - 左侧：成果类型分布饼图，图例可点击过滤。
    - 右侧：年度趋势折线/柱状图，支持 hover 显示当年/当月具体数量。
  - 底部：最近 5–10 条成果列表，点击标题可直接跳到详情页。

---

## 4. 创建成果物（多步骤向导）

> 这是系统复杂度最高、影响体验最深的页面，重点强调“分步引导 + 智能补全 + 自动草稿”。

### 4.1 功能说明

科研人员在此创建新的科研成果：

- 先选择成果类型。
- 再按分组填写基础信息与类型特有字段。
- 支持通过 DOI / 万方 / 知网等标识符一键补全。
- 上传附件并设置可见范围。

### 4.2 流程设计

路径：`/results/create`

步骤条（页面顶部固定）：

1. 选择类型
2. 填写基础信息
3. 智能补全与补充信息
4. 上传附件与可见范围
5. 提交

允许用户在第二步之后随时点击【保存草稿】；离开页面前进行未保存变更提醒。

### 4.3 关键交互细节

#### 4.3.1 选择类型

- 下拉选择成果类型（论文、专利、软著、数据集等）。
- 右侧实时展示该类型的说明文本和示例字段，降低心智负担。
- 选择类型后自动请求字段配置 Schema，用于后续步骤动态渲染表单。

#### 4.3.2 填写基础信息

- 表单分区：
  - 基础信息：标题、作者（默认当前用户，可多选补充）、年份、所属项目、成果概要等。
  - 显示必填星号，顶部右侧展示“已完成 X / Y 个必填项”。
- 对于“所属项目”：使用远程搜索下拉，支持按项目名关键字模糊搜索。

#### 4.3.3 智能补全区

- 在基础信息表单下方单独一块：
  - 输入 DOI / arXiv ID / 万方标题，旁边有【一键补全】按钮。
  - 调用外部 API 成功后，弹出“差异对比”浮层：左侧当前表单值，右侧拉取的新值，逐字段打勾选择是否覆盖。
  - 如果未查到记录：展示“未找到匹配记录，可以继续手动填写”。

#### 4.3.4 附件与可见范围

- 附件上传区：
  - 支持拖拽上传和点击选择，多文件列表展示文件名、大小、上传进度与结果。
  - 上传后如病毒扫描失败，单行标红并显示“检测失败，请更换文件”。
- 可见范围设置：
  - 通过单选控件选择：
    - 私有（仅自己）
    - 机构内摘要可见
    - 机构内全文可见
    - 公开摘要
  - 每个选项旁配一句简短说明，避免误解。

### 4.4 错误处理与草稿机制

- 字段配置加载失败：在表单主体区域展示错误提示和【重试加载】按钮。
- 表单验证失败：
  - 顶部滚动到第一个错误字段。
  - 字段下方显示错误原因，如“标题为必填项”。
- 自动草稿：
  - 每隔 30 秒或用户停止输入 5 秒后自动本地保存一次草稿，页面顶部提示“草稿已自动保存”。
  - 用户再次进入创建页时，如检测到草稿，则弹出提示“检测到未提交的草稿，是否恢复？”。

### 4.5 界面与风格

- 整体为宽表单布局，左右两列：
  - 左列：多数输入字段。
  - 右列：帮助说明小卡片（对对应字段进行解释）、智能提示等。
- 底部操作区固定在视口底部，包含【返回】【保存草稿】【提交审核】三个按钮，主要操作在右侧。 

---

## 5. 个人成果物管理

### 5.1 功能说明

为科研人员提供“我的成果”总览，支持按状态筛选、快速进入编辑和详情、调整可见范围。

### 5.2 主要交互

1. 访问 `/results/my`。默认筛选“全部状态”，按最近更新时间倒序。
2. 顶部筛选：状态、关键字、时间范围，支持回车触发搜索。
3. 列表每行包含：名称、类型、当前状态、所属项目、概要、创建时间、操作。
4. 行为：
   - 点击成果名称 → 打开右侧抽屉详情。
   - 【修改】→ 进入编辑表单，沿用创建页的动态字段逻辑。
   - 【修改可见范围】→ 弹出对话框，单选新范围并确认。

### 5.3 界面与风格

- 顶部筛选区采用浅灰背景卡片，与表格区分开。
- 无数据空态：
  - 显示插画 + 文案“你还没有任何成果记录”。
  - 提供一个主按钮【去创建成果物】。

---

## 6. 成果检索 · 统一列表

### 6.1 功能说明

为所有登录用户提供统一成果检索入口，仅展示当前用户有权查看的成果，并支持“请求访问全文”流程。

### 6.2 主要交互

1. 访问 `/results/search`。
2. 顶部高级搜索区：关键词、作者、成果类型、年份范围、期刊/会议等级等。
3. 点击【查询】后，加载分页结果：
   - 字段：名称、类型、期刊/会议等级、所属项目、概要、入库时间等。
4. 用户行为：
   - 点名称 → 详情抽屉。
   - 若无全文权限：附件区域显示“你暂无权限查看附件”，提供【请求访问全文】按钮。

### 6.3 请求访问全文交互

- 点击【请求访问全文】：
  - 弹出对话框，包含：
    - 申请理由（必填文本域）。
    - 期望用途（下拉，如“科研合作、教学使用、个人学习”等）。
  - 提交后按钮变为“已申请”，防止重复点击；在个人消息中心记录一条待办。

### 6.4 界面与风格

- 顶部搜索区采用分组布局：基本条件（关键词、类型、时间）在左，高级条件（作者、等级）折叠在“更多筛选”中。
- 表格支持列宽拖拽与列显示配置（可选增强）。

---

## 7. 专家 · 成果审核

### 7.1 功能说明

专家集中处理被分配的审核任务，支持高效浏览与批量处理。

### 7.2 主要交互

1. 访问 `/expert/reviews`。
2. 顶部标签切换：待审核 / 已审核。
3. 列表行为：
   - 行内展示：成果名称、类型、提交人、提交时间、当前状态、领域标签（如有）。
   - 支持行点击打开详情侧边抽屉，也可点【审核】按钮直接进入审核视图。
4. 审核视图：
   - 上半部分：成果基本信息与动态属性；附件列表支持在线预览。
   - 下半部分：审核表单（意见文本 + 单选通过/驳回）。
   - 底部：历史审核时间线（显示管理员/其他专家操作）。

### 7.3 界面与风格

- 页面对专家强调“任务感”：
  - 顶部展示“待审核 X 条”，并有简单 filter（按类型、项目等）。
  - 支持“审核下一条”按钮，审核完成后自动跳到下一记录。

---

## 8. 管理员 · 科研看台（Dashboard）

### 8.1 功能说明

向管理员与管理层提供整体科研成果态势：宏观统计 + drill-down 决策支撑。

### 8.2 主要交互

1. 访问 `/admin/dashboard`。
2. 顶部筛选：时间范围、学院/部门、成果类型。
3. 视图区域：
   - 指标卡片：总成果数、论文数、专利数、本月新增等。
   - 图表：
     - 近 5 年产出趋势图（可切换按年/按月）。
     - 成果类型分布饼图。
     - 学院/部门成果数量排行条形图。
   - 列表：最新入库成果、标志性成果卡片列表。
4. “可点可钻”：
   - 点击某个学院在排行图中的条形 → 跳转到成果管理页，并带上该学院过滤条件。
   - 点击标志性成果卡片 → 进入成果详情。

### 8.3 界面与风格

- 采用多卡片布局，保持留白，避免信息过载。
- 标志性成果区使用卡片式展示，含封面/图标、标题、简介、所属单位标签。

---

## 9. 管理员 · 成果管理与审核分配

### 9.1 成果管理

路径：`/admin/results`

- 提供全局成果列表管理视图，支持按学院、类型、状态、可见范围等多条件过滤。
- 每行操作：查看详情、修改成果、调整可见范围、撤销（逻辑删除，带二次确认）。
- 表格上方可显示“当前过滤条件下共 X 条成果”的提示，便于导出决策。

### 9.2 审核与分配专家

路径：`/admin/review-assign`

- 用于查看所有“待审核”成果，并分配给合适的专家。
- 分配弹窗：
  - 左侧专家列表，支持按姓名、领域、学院过滤，并展示当前任务量（例如“在审 5 条”）。
  - 右侧显示已选专家列表，可拖拽调整主审/辅审顺序（可选）。
- 分配成功后该条成果状态变为“审核中”，并在专家端出现任务。

---

## 10. 管理员 · 成果类型与字段配置

路径：`/admin/result-types`

### 10.1 功能说明

通过可视化配置界面，动态管理成果类型及其元数据字段，无需二次开发即可扩展新类型。

### 10.2 交互要点

- 类型列表：展示名称、启用状态、创建时间、最后修改人。
- 右侧字段配置面板：
  - 字段名、字段类型（文本/数值/日期/枚举/文件等）、是否必填、默认值、校验规则、帮助说明。
  - 字段顺序支持拖拽调整，改变后影响创建/编辑表单的显示顺序。
- 禁止直接删除已被使用字段：只能标记为“停用”，并在前台创建页隐藏，新旧数据仍兼容展示。

### 10.3 界面与风格

- 采用“双栏布局 + 表单配置器”模式：左侧列表、右侧详细配置。
- 使用醒目的提示条说明“字段配置会影响前台表单，请谨慎操作”。

---

## 11. 登录态与权限控制（横切）

### 11.1 行为说明

- 所有业务路由均由前端路由守卫校验 token 与角色，无 token 统一跳转 `/login`。
- 权限不足时：
  - 若为菜单入口：在导航中直接隐藏。
  - 若为深链接：展示“403 无权限访问”信息页，并提供【返回首页】按钮。

### 11.2 界面表达

- 403 页面使用简洁插画 + 文案“你暂无访问该页面的权限，如有疑问请联系管理员”。
- 顶部用户头像下拉菜单包含：个人信息、退出登录。

---

## 12. 全局消息中心（增强建议）

### 12.1 功能说明

- 汇总系统内重要事件：
  - 成果审核通过/驳回。
  - 请求访问全文的审批结果。
  - 管理员重要配置变更通知（可选）。

### 12.2 交互与界面

- 顶部导航右侧“铃铛”图标展示未读数量红点。
- 点击后右侧滑出消息列表抽屉：
  - 每条消息包含标题、时间、状态标签（未读/已读）。
  - 点击消息可跳转到对应成果详情或相关页面。
