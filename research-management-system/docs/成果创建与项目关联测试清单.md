# 成果创建与项目关联测试清单

## 测试前准备
- [ ] 启动前端 `npm run dev`
- [ ] 以科研用户登录（researcher / researcher123）
- [ ] 确认项目下拉能加载（`/projects` 返回 200）

## 用例 1：选择已有项目创建成果
- 步骤：
  1. 进入「创建成果」页面。
  2. 选择成果类型（例如论文）。
  3. 在基础信息中选择项目（如 “智慧医疗专项 MED-2024”）。
  4. 填写标题、作者、年份等必填项，上传附件可选。
  5. 点击「提交审核」。
- 预期：
  - 请求体包含 `projectId`、`projectName`、`projectCode`。
  - 成果列表显示所属项目列，筛选该项目能命中刚创建的成果。
  - 详情页展示项目名称/编号。

## 用例 2：新建项目后创建成果
- 步骤：
  1. 在「所属项目」下拉点击「新建项目」。
  2. 填写项目名称/编号并创建。
  3. 新建的项目自动选中；完成表单并提交。
- 预期：
  - 新项目出现在下拉列表；提交 payload 携带该项目。
  - 列表筛选该项目时包含该成果。

## 用例 3：无所属/其他场景
- 步骤：
  1. 在「所属项目」选择“无所属/其他”（或保持空）。
  2. 完成表单并保存草稿。
- 预期：
  - payload 中 `projectId` 为空，`projectName/projectCode` 为空字符串。
  - 列表“所属项目”列显示“无所属/其他”。
  - 搜索页按项目筛选时，选择某项目不会命中该成果（空值不参与过滤）。

## 用例 4：编辑成果更换项目
- 步骤：
  1. 打开已有成果的编辑页。
  2. 将所属项目切换为其他项目；保存修改。
- 预期：
  - update 请求带新的 `projectId`、`projectName`、`projectCode`。
  - 列表与详情显示为新项目。

## 用例 5：检索/列表项目筛选
- 步骤：
  1. 打开「个人成果」与「成果检索」页面。
  2. 使用项目下拉筛选（含刚创建的新项目）。
- 预期：
  - 请求参数包含 `projectId`。
  - 结果只保留匹配项目的成果；空项目的成果不被包含。

## 用例 6：详情页跳转
- 步骤：
  1. 在成果详情页点击“查看该项目下成果”。
- 预期：
  - 跳转到检索页，并带上 `projectId`、`keyword=项目名称` 查询。

## 观察点/日志
- Network：`/projects`、创建/更新成果请求的 payload。
- UI：所属项目列空态文案“无所属/其他”；新建项目后下拉立即可选。
- Mock：`results` 中包含一个无所属的示例（id: r-004）用于验证空值场景。

## 通过率
- 通过数 / 总数：____ / 6
- 主要问题与结论：____________________________________
